<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jobad="http://omdoc.org/presentation" ng-app="browserApp">
<head>
  <meta charset="UTF-8" />
  <!-- <link rel="stylesheet" type="text/css" href="/css/omdoc/omdoc-default.css"/> --> 
<title>MMT Web Server</title>

<script type="text/javascript" src="script/jquery/jquery.js"></script>

<link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap/css/bootstrap-theme.min.css">
<script type="text/javascript" src="script/bootstrap/bootstrap.min.js"></script>

  <link rel="stylesheet" type="text/css" href="css/mmt.css"/>
  <link rel="stylesheet" type="text/css" href="css/browser.css"/>
  <link rel="stylesheet" type="text/css" href="css/JOBAD.css"/>
  <link rel="stylesheet" type="text/css" href="css/jquery/jquery-ui.css"/>
  <!-- <link rel="stylesheet" type="text/css" href="/css/jquery/ui.base.css"/> -->
  <link rel="shortcut icon" href="mmt2.png" />

  <script src="script/codemirror2/lib/codemirror.js"></script>
  <link rel="stylesheet" href="script/codemirror2/lib/codemirror.css"/>
  <script src="script/codemirror2/mode/lf/lf.js"></script>

  <script type="text/javascript" src="script/jquery/jquery-ui.js"></script>
  <script type="text/javascript" src="script/tree/jquery.hotkeys.js"></script>
  <script type="text/javascript" src="script/tree/jquery.jstree.js"></script>
  <!--<script type="text/javascript" src="/script/SVGPan/SVGPan.js"></script>-->

  <!-- JOBAD Deps -->
  <script type="text/javascript" src="script/jobad/deps/underscore-min.js"></script>
  <!-- JOBAD -->
  <script type="text/javascript" src="script/jobad/JOBAD.js"></script>
  <!-- MMT API -->
  <!-- Core JS API for MMT interaction -->
  <script type="text/javascript" src="script/mmt/mmt-js-api.js"></script>
  <!-- JOBAD Services -->
  <script type="text/javascript" src="script/jobad/modules/navigation.js"></script>
  <script type="text/javascript" src="script/jobad/modules/hovering.js"></script>
  <script type="text/javascript" src="script/jobad/modules/interactive-viewing.js"></script>

    <!-- JOBAD Init -->
     
   
  <script type="text/javascript">
      var JOBAD1;
      $(function(){
         JOBAD1 = new JOBAD($("#main,#parseForm #inputviewterm,#parseForm #inputviewtype,#results,#breadcrumbs,#sidebar,#pathtree, #second_column"));
         JOBAD1.modules.load("kwarc.mmt.navigation", []);
         JOBAD1.modules.load("kwarc.mmt.hovering", []);
         JOBAD1.modules.load("kwarc.mmt.intvw", []);
         JOBAD1.Setup();
      })
  </script>
	<script src="script/angularjs/angular-1.3.14/angular.js"></script>
	<script src="script/browseController.js"></script>
  <script type="text/javascript">
    $(function () {
       $("#pathtree").jstree({
           "core" : {"animation": 0},
           "xml_data" : {
              "ajax" : {
                 "url" : "/:tree",
                 "data" : function(node) {return (node == -1) ? ":root" : node.attr("id");}
              },
              "xsl" : "nest"
           },
           "themes" : {"theme" : "classic", "icons" : false},
           "plugins" : ["xml_data", "themes", "ui", "hotkeys"]
       });
   });

   $(function(){
      var inpbox = $('input#inputbox');
      var ana = $('input#inputanalyze')[0];
      var simp = $('input#inputsimplify')[0];
      function simpPres(e) {
         var eS = simp.checked ? qmt.simplify(e) : e;
         return qmt.present(eS);
      }
      $('#parseForm #inputbox,#parseForm #inputanalyze,#parseForm #inputsimplify').on('change keyup paste', function(){
         var q = qmt.parse(qmt.literalString(inpbox.val()));
         if (ana.checked) {
            var qA = qmt.analyze(q);
            q = qmt.let(qA, qmt.tuple(simpPres(qmt.bound(1)) + simpPres(qmt.bound(2))));
         } else {
            q = simpPres(q);
         }
		   qmt.exec(q,
		      function(resultNode){
		         var result = $(resultNode.firstChild).children();
		         var inpviewterm = $('#parseForm #inputviewterm')[0];
		         var inpviewtype = $('#parseForm #inputviewtype')[0];
		         var tm = result[0].firstChild
		         var tp = ana.checked ? result[1].firstChild : window.document.createElement('div');
		         inpviewterm.replaceChild(tm, inpviewterm.firstChild);
		         inpviewtype.replaceChild(tp, inpviewtype.firstChild);
		      }
		   );
		})
   });

   $(function(){$('#latin-dialog').dialog({ autoOpen: false})});
  </script>
  
  <script type="text/javascript">
     function toggleClick(elem,label){
        var cls = label != null ? label : 'toggleTarget'
        $(elem).parent().closest('div').find('.' + cls).toggle()
     }
  </script>
  
  
  
  <script type="text/javascript">
      function resultClick(p){
         navigation.navigate(p);
      }
   </script>

   <script type="text/javascript">
    $(function(){
    	$( "#start" ).click(function() {     
    		   $('#first').toggle("slide", { direction: "left" }, 1000);

    		});
    });
   </script>

</head>

<body ng-controller="browserController">

<div class="wrapper" >

	<!-- bar -->
	<br><br/>
	<div class="col-md-12">
		<div class="centered"><h2 class="text-muted"><b>MMT</b></h2></div>
	</div>
	<div class="col-md-12">
		<div class="col-md-offset-3 col-md-6">
					<div class="btn-group btn-group-lg  btn-group-justified" role="group" aria-label="top">
						<a type="button" class="btn btn-primary" id="start" ng-show="startClicked == 0" ng-click="start()"><b>Archives</b></a>
						<a type="button" class="btn btn-success" ng-show="startClicked == 1" ng-click="startClicked = 0; showArc = 0; showMain = 0; showMainKey = 0"><b>Archives</b></a>
						<a type="button" class="btn btn-primary" ng-show="searchClicked == 0" ng-click="searchClicked = 1; showSearch = 1; showSearchKey = 1"><b>Search</b></a>
						<a type="button" class="btn btn-success" ng-show="searchClicked == 1" ng-click="searchClicked = 0; showSearch = 0; showSearchKey = 0"><b>Search</b></a>
						<a type="button" class="btn btn-primary" ng-show="parseClicked == 0" ng-click="parseClicked = 1; showParse = 1; showParseKey = 1"><b>Parse</b></a>
						<a type="button" class="btn btn-success" ng-show="parseClicked == 1" ng-click="parseClicked = 0; showParse = 0; showParseKey = 0"><b>Parse</b></a>
						<a type="button" class="btn btn-success" ng-show="showHelpKey==1" ng-click="showHelpKey=0"><b>Help</b></a>
						<a type="button" class="btn btn-primary" ng-show="showHelpKey==0" ng-click="showHelpKey=1"><b>Help</b></a>
					</div>
					<div class="panel panel-default" ng-show="showHelpKey==1">
						<div class="panel-body bg-info">
							<div class="centered">
								<p><h4><b>See the documentation <a href="https://svn.kwarc.info/repos/MMT/doc/html/index.html">here</a> in the MMT repository for an overview of features!</b></h4></p>
							</div>
						</div>
					</div>
		</div>
		<br> <br> <br> <br>
	</div>

	<div class="col-md-4">
		<div class="panel panel-default" id="panelArc" ng-show="showArc == 1">
			<div class="bg-primary">
				<div class="panel-heading">
					<b>Archives</b>
				</div>
			</div>
			<div class="panel-body" ng-show="showMainKey==1">
				<div id="sidebar">
					<div id="pathtree">
					</div>
				</div>
			</div>
		</div></div>


	<!-- page content -->
	<div class = "col-md-8">
		<div class="panel panel-default" id="panel0" ng-show="showMain == 1">
			<div class="bg-primary">
				<div class="panel-heading">
					<b>Main</b>
					<button class="btn btn-info btn-xs pull-right" ng-show="showMainKey==1" ng-click="showMainKey=0">
						<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
					</button>
					<button class="btn btn-info btn-xs pull-right" ng-show="showMainKey==0" ng-click="showMainKey=1">
						<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
					</button>
				</div>
			</div>
			<div class="panel-body" ng-show="showMainKey==1">
				<div id="breadcrumbs" class="col-md-8">
					<div class="panel panel-back noti-box">
									<span class="icon-box bg-color-red set-icon">
										<i class="fa fa-envelope-o"></i>
									</span>
					</div>
				</div>
				<br><br>
				<div id="main" class="col-md-11">
					<div class="panel panel-back noti-box">
	            				<span class="icon-box bg-color-green set-icon">
	                				<i class="fa fa-bars"></i>
	                			</span>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class = "col-md-offset-2 col-md-8">
		<div class="panel panel-default" id="panel1" ng-show="showSearch == 1">
			<div class="panel-heading">
				<b>Search Form</b>
				<button class="btn btn-info btn-xs pull-right" ng-show="showSearch==1" ng-click="showResultsKey=0; showSearch=0; searchClicked=0">
					<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
				</button>
				<button class="btn btn-info btn-xs pull-right" ng-show="showSearchKey==1" ng-click="showSearchKey=0">
					<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
				</button>
				<button class="btn btn-info btn-xs pull-right" ng-show="showSearchKey==0" ng-click="showSearchKey=1">
					<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
				</button>
			</div>
			<div class="panel-body" ng-show="showSearchKey==1">
				<form class="form-horizontal" name="searchForm">
					<div class="form-group">
						<div class="centered">
							<label for="base" class="control-label">
								<div class="alert alert-info" role="alert">
									Enter <a href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum">Java regular expressions</a> to filter based on the URI of a declaration<br/>
								</div>
							</label>
						</div>
					</div>
					<div class="form-group">
						<label for="base" class="col-md-2 control-label"><div class="pull-right">Namespace</div></label>
						<div class="col-md-3">
							<input type="text" class="form-control" size="30" ng-model="baseInput" id="base"/>
						</div>
					</div>
					<div class="form-group">
						<label for="module" class="col-md-2 control-label"><div class="pull-right">Theory</div></label>
						<div class="col-md-3">
							<input type="text" class="form-control" ng-model="moduleInput" size="30" id="module"/>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="col-md-2 control-label"><div class="pull-right">Name</div></label>
						<div class="col-md-3">
							<input type="text" class="form-control" ng-model="nameInput" size="30" id="name"/>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label"><div class="pull-right">Roles</div></label>
						<div class="checkbox col-md-10">
							<label><input type="checkbox" ng-model="rolesConstant" id="constant"> Primitive </label>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-2 col-md-10">
							<div class="checkbox">
								<label><input type="checkbox" ng-model="rolesDefined" id="defined"> Defined </label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-2 col-md-10">
							<div class="checkbox">
								<label><input type="checkbox" ng-model="rolesAxiom" id="axiom"> Axiom </label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-2 col-md-10">
							<div class="checkbox">
								<label><input type="checkbox" ng-model="rolesTheorem" id="theorem"> Theorem </label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="theory" class="col-md-4 control-label"><div class="pull-right">Enter an expression over theory</div></label>
						<div class="col-md-3">
							<input type="text" size="30" class="form-control" ng-model="theoryInput" id="theory" class="activetheory">
						</div>
					</div>
					<div class="form-group">
						<label for="type" class="col-md-4 control-label"><div class="pull-right">The expression matches inside the </div></label>
						<div class="checkbox col-md-1">
							<label><input type="checkbox" id="type" ng-model="expType" checked="checked"/>Type</label>
						</div>
						<label for="type" class="col-md-2 control-label"><div class="pull-right"> or </div></label>
						<div class="checkbox col-md-4">
							<label><input type="checkbox" ng-model="expDef" id="definition"/>Definitions of a Declaration</label>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-4">
							<div class="col-md-3">
								<input type="text" size="30" class="form-control" ng-model="patternInput" id="pattern">
							</div>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-4">
							<p class="help-block">Use $x,y,z:query to enter unification variables.</p>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-offset-8">
							<div class="col-md-7">
								<button class="btn btn-primary btn-block" ng-model="searchFinal" value="Search" id="search" ng-click="search()">Search</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="col-md-offset-4 col-md-4">

		<div class="panel panel-default" id="panel2" ng-show="showSearch==1; showResultsKey==1">
			<div class="panel-heading">
				<b>Search Results</b>
				<button class="btn btn-info btn-xs pull-right" ng-show="showResultsKey==1" ng-click="showResultsKey=0; showSearchKey=1">
					<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
				</button>
			</div>
			<div class="panel-body">
				<div id="results"><div></div></div>
			</div>
		</div>
	</div>

	<div class="col-md-12">
		<div class="col-md-offset-2 col-md-8">
			<div class="panel panel-default" id="panel3" ng-show="showParse==1">
				<div class="panel-heading">
					<b>Parse</b>
					<button class="btn btn-info btn-xs pull-right" ng-show="showParseKey==1" ng-click="showParseKey=0">
						<span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
					</button>
					<button class="btn btn-info btn-xs pull-right" ng-show="showParseKey==0" ng-click="showParseKey=1">
						<span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
					</button>
				</div>
				<div class="panel-body" ng-show="showParseKey==1">
					<form class="form-horizontal"  id="parseForm">
						<div class="form-group">
							<div class="col-md-offset-1">
								<label for="activetheory" class="col-md-3 control-label">
									<div class="pull-right">Enter an object over theory:</div>
								</label>
								<div class="col-md-4"><input name="activeTheory" type="text" size=30 id="activetheory" class="form-control" /></div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-offset-4">
								<label><input type="checkbox" name="inputAnalyze" id="inputanalyze"/>Analyze</label>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-offset-4">
								<label><input type="checkbox" name="inputSimplify" id="inputsimplify"/>Simplify</label>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-offset-4">
								<textarea class="form-control" name="inputBox" rows="3"></textarea>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-offset-1">
								<label for="parseResult" class="col-md-3 control-label">
									<div class="pull-right">Result:</div>
								</label>
								<div class="col-md-4" name="parseResult" id="parseResult"><span name="inputViewTerm" id="inputviewterm"></span></div>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-offset-1">
								<label for="inferredType" class="col-md-3 control-label">
									<div class="pull-right">Inferred Type:</div>
								</label>
								<div class="col-md-4" name="inferredType" id="inferredType"><span name="inputViewType" id="inputviewtype"></span></div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

	</div>

</div>

<div id="latin-dialog"></div>

</div>
		</div>
</body>

</html>
