An MMT archive \cite{HIJKR:dimensions:11} organizes connected documents in a file system structure. This is inspired by and similar to the project view in software engineering, specifically in Java. MMT provides archive-level functions for building and indexing document collections.

Archives can be manipulated via the API functions or via the shell (see Sect.~\ref{sec:shell:archives}).

\paragraph{Dimensions}
MMT supports the following dimensions, which occur as toplevel folders in an archive.
The following dimensions contain the same tree of subfolders and files.
\begin{itemize}
 \item \texttt{source}: source files in any language, in particular MMT text syntax
 \item \texttt{compiled}: the files in \mmt XML syntax
 \item \texttt{narration}: similar to the ones in \texttt{compiled} but containing only the narrative outline, i.e., all {\mmt} modules are replaced with \snippet{mref} elements
 \item \texttt{notation}: index of notations
 \item \texttt{relational}: relational index
 \item \texttt{mws}: MathWebSearch \cite{mathwebsearch} index
\end{itemize}
The names of the folders \texttt{source} and \texttt{compiled} may be changed by using the \texttt{compilation} key in the manifest (see below).

The \texttt{content} dimension contains one file for every MMT module. The directory structure follows that of the {\mmt} namespaces. In particular, the folder immediate below \texttt{content} is named by the scheme and the authority of the namespace URI. (\texttt{..} is used as a separator instead of \texttt{://} to avoid character restrictions of operating systems.) Below these folders, one subfolder is used for every path segment.

The \texttt{scala} dimension contains one file for every file in the \texttt{content} directory.
It contains the Scala code extract from the \mmt modules as described in \cite{KMR:uom:13}.

\paragraph{Manifest}
Archives must contain a file \texttt{META-INT/MANIFEST.MF}. Syntactically, this file consists of line-wise \texttt{key:value} pairs. Except for colons in keys, all characters are allowed. However, beginning and trailing whitespace in keys and values is ignored. Empty lines and lines starting with \texttt{//} are ignored.
Unless otherwise mentioned, keys should occur only once and later occurrences overwrite previous values.

The following keys have a predefined meaning and are used by {\mmt}:
\begin{itemize}
 \item \texttt{id}: The identifier of the archive.
 \item \texttt{compilation}: A string of the form \texttt{format\_1 @ folder\_1 -> ... -> format\_n @ folder\_n}. This identifies a compilation chain used for the compilation of the archive. \texttt{format\_i} defines the format of the files in \texttt{folder\_i}. \texttt{folder\_1} and \texttt{folder\_n} identify the folders storing the \texttt{source} and \texttt{compiled} dimensions; consequently, \texttt{format\_1} is the source format of the archive, and \texttt{format\_n} should be \texttt{omdoc}.
 \item \texttt{narration-base}: This is a URI that gives the base URI for the \texttt{source} documents and all dimensions with the same folder structure.
 It also doubles as the URI of the whole archive.
 \item \texttt{source-base}: This is a URI that gives the base URI for all modules in the \texttt{source} documents.
\end{itemize}

\ednote{Additional key-value pairs are ignored except for passing them on to compilers.}

\paragraph{Build Processes}
MMT provides to build the dimensions of an archive, starting from the source:
\begin{description}
 \item[compile] \texttt{compiled} is generated from \texttt{source}.
 \item[content] (indexing) \texttt{content}, \texttt{narration}, \texttt{relational}, and \texttt{notation} are generated generically from \texttt{compiled}.
 \item[extract] (code generation) \texttt{scala} is generated from \texttt{content}.
 \item[mar] (packaging) \texttt{id.mar} is generated by packaging all dimensions.
\end{description}

The compilation works as follows. According to the compilation chain defined in the manifest, compilers are called that read the files in \texttt{folder\_i} and write files into \texttt{folder\_i+1}. For each step in the chain, the appropriate compiler is chosen according to the \texttt{format\_i}.
The available compilers are provided as extensions (see Sect.~\ref{sec:extensions}).
